<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>React DevTools Profiler í…ŒìŠ¤íŠ¸</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }
    h1 {
      color: #2c3e50;
    }
    .instructions {
      background: #e7f3ff;
      padding: 20px;
      border-left: 4px solid #2196F3;
      margin-bottom: 30px;
      border-radius: 4px;
    }
    .instructions h2 {
      margin-top: 0;
      color: #1976D2;
    }
    .instructions ol {
      margin-bottom: 0;
    }
    .app-container {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .controls {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    button {
      padding: 10px 20px;
      font-size: 14px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.2s;
    }
    button:hover {
      opacity: 0.9;
    }
    .btn-primary {
      background: #2196F3;
      color: white;
    }
    .btn-danger {
      background: #f44336;
      color: white;
    }
    .btn-success {
      background: #4CAF50;
      color: white;
    }
    input[type="text"] {
      padding: 10px;
      font-size: 14px;
      border: 1px solid #ddd;
      border-radius: 4px;
      width: 200px;
    }
    .counter-display {
      font-size: 48px;
      font-weight: bold;
      color: #2196F3;
      text-align: center;
      padding: 20px;
    }
    .section {
      margin: 20px 0;
      padding: 20px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      background: #fafafa;
    }
    .section h3 {
      margin-top: 0;
      color: #333;
      border-bottom: 2px solid #2196F3;
      padding-bottom: 10px;
    }
    .item-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .item-list li {
      padding: 12px 16px;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .item-list li:last-child {
      border-bottom: none;
    }
    .expensive-indicator {
      background: #fff3cd;
      color: #856404;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
    }
    .render-count {
      background: #e8f5e9;
      color: #2e7d32;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      margin-left: 8px;
    }
    .warning-box {
      background: #fff3cd;
      border: 1px solid #ffc107;
      padding: 15px;
      border-radius: 4px;
      margin: 20px 0;
    }
    .warning-box h4 {
      margin-top: 0;
      color: #856404;
    }
  </style>
</head>
<body>
  <h1>ğŸ”¬ React DevTools Profiler í…ŒìŠ¤íŠ¸</h1>

  <div class="instructions">
    <h2>í…ŒìŠ¤íŠ¸ ë°©ë²•</h2>
    <ol>
      <li><strong>React DevTools ì„¤ì¹˜</strong>: Chrome í™•ì¥ í”„ë¡œê·¸ë¨ì—ì„œ "React Developer Tools" ì„¤ì¹˜</li>
      <li><strong>DevTools ì—´ê¸°</strong>: F12 â†’ "Profiler" íƒ­ ì„ íƒ</li>
      <li><strong>ë…¹í™” ì‹œì‘</strong>: íŒŒë€ìƒ‰ ë…¹í™” ë²„íŠ¼ í´ë¦­</li>
      <li><strong>ì•„ë˜ ë²„íŠ¼ë“¤ í´ë¦­</strong>: ì¹´ìš´í„° ì¦ê°€, ì…ë ¥, ì•„ì´í…œ ì¶”ê°€ ë“±</li>
      <li><strong>ë…¹í™” ì¤‘ì§€</strong>: ë…¹í™” ë²„íŠ¼ ë‹¤ì‹œ í´ë¦­</li>
      <li><strong>ê²°ê³¼ ë¶„ì„</strong>:
        <ul>
          <li>Flame Chartì—ì„œ ì»´í¬ë„ŒíŠ¸ë³„ ë Œë”ë§ ì‹œê°„ í™•ì¸</li>
          <li>ë…¸ë€ìƒ‰/ë¹¨ê°„ìƒ‰ ì»´í¬ë„ŒíŠ¸ê°€ ì˜¤ë˜ ê±¸ë¦° ê²ƒ</li>
          <li>ì»´í¬ë„ŒíŠ¸ í´ë¦­ â†’ "Why did this render?" í™•ì¸</li>
        </ul>
      </li>
    </ol>
  </div>

  <div id="root"></div>

  <script type="text/babel">
    const { useState, memo, useCallback, useMemo } = React;

    // ë Œë”ë§ íšŸìˆ˜ ì¶”ì ìš©
    const renderCounts = {};
    function trackRender(name) {
      renderCounts[name] = (renderCounts[name] || 0) + 1;
      return renderCounts[name];
    }

    // ì˜ë„ì ìœ¼ë¡œ ëŠë¦° ì»´í¬ë„ŒíŠ¸ (ìµœì í™” ì•ˆ ë¨)
    function ExpensiveChildUnoptimized({ data }) {
      const count = trackRender('ExpensiveChildUnoptimized');

      // ì˜ë„ì ìœ¼ë¡œ ëŠë¦° ê³„ì‚°
      const start = performance.now();
      while (performance.now() - start < 50) {
        // 50ms ë¸”ë¡œí‚¹
      }

      return (
        <div style={{ padding: '10px', background: '#ffebee', borderRadius: '4px', marginBottom: '10px' }}>
          <span className="expensive-indicator">âŒ ìµœì í™” ì•ˆ ë¨ (50ms ë¸”ë¡œí‚¹)</span>
          <span className="render-count">ë Œë”ë§: {count}íšŒ</span>
          <p>ë°ì´í„°: {data}</p>
        </div>
      );
    }

    // ìµœì í™”ëœ ì»´í¬ë„ŒíŠ¸ (React.memo ì‚¬ìš©)
    const ExpensiveChildOptimized = memo(function ExpensiveChildOptimized({ data }) {
      const count = trackRender('ExpensiveChildOptimized');

      // ì˜ë„ì ìœ¼ë¡œ ëŠë¦° ê³„ì‚°
      const start = performance.now();
      while (performance.now() - start < 50) {
        // 50ms ë¸”ë¡œí‚¹
      }

      return (
        <div style={{ padding: '10px', background: '#e8f5e9', borderRadius: '4px', marginBottom: '10px' }}>
          <span style={{ background: '#c8e6c9', padding: '4px 8px', borderRadius: '4px', fontSize: '12px' }}>
            âœ… React.memo ì ìš© (50ms ë¸”ë¡œí‚¹)
          </span>
          <span className="render-count">ë Œë”ë§: {count}íšŒ</span>
          <p>ë°ì´í„°: {data}</p>
        </div>
      );
    });

    // ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ ì»´í¬ë„ŒíŠ¸
    function ListItem({ item, onRemove }) {
      const count = trackRender(`ListItem-${item.id}`);
      return (
        <li>
          <span>{item.text}</span>
          <div>
            <span className="render-count">ë Œë”ë§: {count}íšŒ</span>
            <button
              onClick={() => onRemove(item.id)}
              style={{ marginLeft: '8px', padding: '4px 8px', background: '#f44336', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer' }}
            >
              ì‚­ì œ
            </button>
          </div>
        </li>
      );
    }

    // ìµœì í™”ëœ ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ
    const ListItemOptimized = memo(function ListItemOptimized({ item, onRemove }) {
      const count = trackRender(`ListItemOptimized-${item.id}`);
      return (
        <li>
          <span>âœ… {item.text}</span>
          <div>
            <span className="render-count">ë Œë”ë§: {count}íšŒ</span>
            <button
              onClick={() => onRemove(item.id)}
              style={{ marginLeft: '8px', padding: '4px 8px', background: '#f44336', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer' }}
            >
              ì‚­ì œ
            </button>
          </div>
        </li>
      );
    });

    // ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸
    function App() {
      const [count, setCount] = useState(0);
      const [inputValue, setInputValue] = useState('');
      const [items, setItems] = useState([
        { id: 1, text: 'ì•„ì´í…œ 1' },
        { id: 2, text: 'ì•„ì´í…œ 2' },
        { id: 3, text: 'ì•„ì´í…œ 3' },
      ]);
      const [staticData] = useState('ë³€í•˜ì§€ ì•ŠëŠ” ë°ì´í„°');

      // ìµœì í™” ì•ˆ ëœ í•¸ë“¤ëŸ¬ (ë§¤ ë Œë”ë§ë§ˆë‹¤ ìƒˆë¡œ ìƒì„±)
      const handleRemoveUnoptimized = (id) => {
        setItems(items.filter(item => item.id !== id));
      };

      // ìµœì í™”ëœ í•¸ë“¤ëŸ¬ (useCallback ì‚¬ìš©)
      const handleRemoveOptimized = useCallback((id) => {
        setItems(prev => prev.filter(item => item.id !== id));
      }, []);

      const addItem = () => {
        const newId = Math.max(0, ...items.map(i => i.id)) + 1;
        setItems([...items, { id: newId, text: `ì•„ì´í…œ ${newId}` }]);
      };

      return (
        <div className="app-container">
          {/* ì„¹ì…˜ 1: ì¹´ìš´í„° (ë¶€ëª¨ ë¦¬ë Œë”ë§ í…ŒìŠ¤íŠ¸) */}
          <div className="section">
            <h3>1ï¸âƒ£ ë¶€ëª¨ ë¦¬ë Œë”ë§ â†’ ìì‹ ë¦¬ë Œë”ë§ í…ŒìŠ¤íŠ¸</h3>
            <p>ì¹´ìš´í„°ë¥¼ ì¦ê°€ì‹œí‚¤ë©´ ë¶€ëª¨ê°€ ë¦¬ë Œë”ë§ë©ë‹ˆë‹¤. ìì‹ ì»´í¬ë„ŒíŠ¸ì˜ ë¦¬ë Œë”ë§ íšŸìˆ˜ë¥¼ ë¹„êµí•´ë³´ì„¸ìš”.</p>

            <div className="controls">
              <button className="btn-primary" onClick={() => setCount(c => c + 1)}>
                ì¹´ìš´í„° ì¦ê°€
              </button>
              <div className="counter-display">{count}</div>
            </div>

            <ExpensiveChildUnoptimized data={staticData} />
            <ExpensiveChildOptimized data={staticData} />

            <div className="warning-box">
              <h4>âš ï¸ Profilerì—ì„œ í™•ì¸í•  ê²ƒ</h4>
              <ul>
                <li><strong>ExpensiveChildUnoptimized</strong>: ì¹´ìš´í„° ì¦ê°€í•  ë•Œë§ˆë‹¤ ë¦¬ë Œë”ë§ (ë…¸ë€ìƒ‰/ë¹¨ê°„ìƒ‰)</li>
                <li><strong>ExpensiveChildOptimized</strong>: propsê°€ ì•ˆ ë°”ë€Œë¯€ë¡œ ë¦¬ë Œë”ë§ ì•ˆ ë¨ (íšŒìƒ‰ ë˜ëŠ” í‘œì‹œ ì•ˆ ë¨)</li>
                <li>"Why did this render?" â†’ "The parent component rendered" í™•ì¸</li>
              </ul>
            </div>
          </div>

          {/* ì„¹ì…˜ 2: ì…ë ¥ í•„ë“œ (ì¦ì€ ì—…ë°ì´íŠ¸ í…ŒìŠ¤íŠ¸) */}
          <div className="section">
            <h3>2ï¸âƒ£ ì…ë ¥ í•„ë“œ - ì¦ì€ ìƒíƒœ ì—…ë°ì´íŠ¸</h3>
            <p>íƒ€ì´í•‘í•  ë•Œë§ˆë‹¤ ìƒíƒœê°€ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤. ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ì´ ë°œìƒí•˜ëŠ”ì§€ í™•ì¸í•´ë³´ì„¸ìš”.</p>

            <div className="controls">
              <input
                type="text"
                value={inputValue}
                onChange={(e) => setInputValue(e.target.value)}
                placeholder="ì—¬ê¸°ì— íƒ€ì´í•‘í•˜ì„¸ìš”..."
              />
              <span>ì…ë ¥ê°’: {inputValue}</span>
            </div>

            <div className="warning-box">
              <h4>âš ï¸ Profilerì—ì„œ í™•ì¸í•  ê²ƒ</h4>
              <ul>
                <li>íƒ€ì´í•‘í•  ë•Œë§ˆë‹¤ ì „ì²´ Appì´ ë¦¬ë Œë”ë§</li>
                <li>ExpensiveChildUnoptimizedë„ ë§¤ë²ˆ ë¦¬ë Œë”ë§ (ì„±ëŠ¥ ë¬¸ì œ!)</li>
                <li>ExpensiveChildOptimizedëŠ” ë¦¬ë Œë”ë§ ì•ˆ ë¨</li>
              </ul>
            </div>
          </div>

          {/* ì„¹ì…˜ 3: ë¦¬ìŠ¤íŠ¸ (keyì™€ ì½œë°± ìµœì í™” í…ŒìŠ¤íŠ¸) */}
          <div className="section">
            <h3>3ï¸âƒ£ ë¦¬ìŠ¤íŠ¸ ë Œë”ë§ - ì½œë°± ìµœì í™” ë¹„êµ</h3>
            <p>ì•„ì´í…œì„ ì¶”ê°€/ì‚­ì œí•  ë•Œ ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œì˜ ë¦¬ë Œë”ë§ì„ ë¹„êµí•´ë³´ì„¸ìš”.</p>

            <div className="controls">
              <button className="btn-success" onClick={addItem}>
                ì•„ì´í…œ ì¶”ê°€
              </button>
            </div>

            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px' }}>
              <div>
                <h4>âŒ ìµœì í™” ì•ˆ ë¨ (ì¸ë¼ì¸ ì½œë°±)</h4>
                <ul className="item-list">
                  {items.map(item => (
                    <ListItem
                      key={item.id}
                      item={item}
                      onRemove={handleRemoveUnoptimized}
                    />
                  ))}
                </ul>
              </div>
              <div>
                <h4>âœ… ìµœì í™”ë¨ (memo + useCallback)</h4>
                <ul className="item-list">
                  {items.map(item => (
                    <ListItemOptimized
                      key={item.id}
                      item={item}
                      onRemove={handleRemoveOptimized}
                    />
                  ))}
                </ul>
              </div>
            </div>

            <div className="warning-box">
              <h4>âš ï¸ Profilerì—ì„œ í™•ì¸í•  ê²ƒ</h4>
              <ul>
                <li><strong>ì™¼ìª½ ë¦¬ìŠ¤íŠ¸</strong>: í•˜ë‚˜ ì‚­ì œí•´ë„ ëª¨ë“  ì•„ì´í…œì´ ë¦¬ë Œë”ë§</li>
                <li><strong>ì˜¤ë¥¸ìª½ ë¦¬ìŠ¤íŠ¸</strong>: ë³€ê²½ëœ ì•„ì´í…œë§Œ ë¦¬ë Œë”ë§</li>
                <li>"Why did this render?" â†’ "Props changed: onRemove" í™•ì¸</li>
              </ul>
            </div>
          </div>

          {/* ìš”ì•½ */}
          <div className="section" style={{ background: '#e3f2fd' }}>
            <h3>ğŸ“Š Profiler ë¶„ì„ í¬ì¸íŠ¸ ìš”ì•½</h3>
            <table style={{ width: '100%', borderCollapse: 'collapse' }}>
              <thead>
                <tr style={{ background: '#bbdefb' }}>
                  <th style={{ padding: '10px', textAlign: 'left', border: '1px solid #90caf9' }}>ë¬¸ì œ</th>
                  <th style={{ padding: '10px', textAlign: 'left', border: '1px solid #90caf9' }}>Profilerì—ì„œ ë³´ì´ëŠ” ê²ƒ</th>
                  <th style={{ padding: '10px', textAlign: 'left', border: '1px solid #90caf9' }}>í•´ê²°ì±…</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td style={{ padding: '10px', border: '1px solid #90caf9' }}>ë¶€ëª¨ ë¦¬ë Œë”ë§ ì „íŒŒ</td>
                  <td style={{ padding: '10px', border: '1px solid #90caf9' }}>ìì‹ë„ ë…¸ë€ìƒ‰/ë¹¨ê°„ìƒ‰</td>
                  <td style={{ padding: '10px', border: '1px solid #90caf9' }}>React.memo</td>
                </tr>
                <tr>
                  <td style={{ padding: '10px', border: '1px solid #90caf9' }}>ì½œë°± ì°¸ì¡° ë³€ê²½</td>
                  <td style={{ padding: '10px', border: '1px solid #90caf9' }}>"Props changed: onRemove"</td>
                  <td style={{ padding: '10px', border: '1px solid #90caf9' }}>useCallback</td>
                </tr>
                <tr>
                  <td style={{ padding: '10px', border: '1px solid #90caf9' }}>ëŠë¦° ì»´í¬ë„ŒíŠ¸</td>
                  <td style={{ padding: '10px', border: '1px solid #90caf9' }}>Render duration > 16ms</td>
                  <td style={{ padding: '10px', border: '1px solid #90caf9' }}>useMemo, ì½”ë“œ ìµœì í™”</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
