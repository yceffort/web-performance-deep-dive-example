<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vue DevTools Performance í…ŒìŠ¤íŠ¸</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }
    h1 {
      color: #42b883;
    }
    .instructions {
      background: #e8f5e9;
      padding: 20px;
      border-left: 4px solid #42b883;
      margin-bottom: 30px;
      border-radius: 4px;
    }
    .instructions h2 {
      margin-top: 0;
      color: #2e7d32;
    }
    .app-container {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .controls {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      align-items: center;
    }
    button {
      padding: 10px 20px;
      font-size: 14px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.2s;
    }
    button:hover {
      opacity: 0.9;
    }
    .btn-primary {
      background: #42b883;
      color: white;
    }
    .btn-danger {
      background: #f44336;
      color: white;
    }
    input[type="text"] {
      padding: 10px;
      font-size: 14px;
      border: 1px solid #ddd;
      border-radius: 4px;
      width: 200px;
    }
    .counter-display {
      font-size: 48px;
      font-weight: bold;
      color: #42b883;
      text-align: center;
      padding: 20px;
    }
    .section {
      margin: 20px 0;
      padding: 20px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      background: #fafafa;
    }
    .section h3 {
      margin-top: 0;
      color: #333;
      border-bottom: 2px solid #42b883;
      padding-bottom: 10px;
    }
    .item-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .item-list li {
      padding: 12px 16px;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .render-count {
      background: #e8f5e9;
      color: #2e7d32;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      margin-left: 8px;
    }
    .warning-box {
      background: #fff3cd;
      border: 1px solid #ffc107;
      padding: 15px;
      border-radius: 4px;
      margin: 20px 0;
    }
    .warning-box h4 {
      margin-top: 0;
      color: #856404;
    }
    .expensive-box {
      padding: 15px;
      border-radius: 4px;
      margin-bottom: 10px;
    }
    .expensive-box.unoptimized {
      background: #ffebee;
    }
    .expensive-box.optimized {
      background: #e8f5e9;
    }
    .badge {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      margin-right: 8px;
    }
    .badge-warning {
      background: #fff3cd;
      color: #856404;
    }
    .badge-success {
      background: #c8e6c9;
      color: #2e7d32;
    }
  </style>
</head>
<body>
  <h1>ğŸ”¬ Vue DevTools Performance í…ŒìŠ¤íŠ¸</h1>

  <div class="instructions">
    <h2>í…ŒìŠ¤íŠ¸ ë°©ë²•</h2>
    <ol>
      <li><strong>Vue DevTools ì„¤ì¹˜</strong>: Chrome í™•ì¥ í”„ë¡œê·¸ë¨ì—ì„œ "Vue.js devtools" ì„¤ì¹˜</li>
      <li><strong>DevTools ì—´ê¸°</strong>: F12 â†’ "Vue" íƒ­ ì„ íƒ</li>
      <li><strong>Performance íƒ­</strong>: ìƒë‹¨ì˜ "Performance" ë˜ëŠ” "Timeline" ë²„íŠ¼ í´ë¦­</li>
      <li><strong>ë…¹í™” ì‹œì‘</strong>: ë…¹í™” ë²„íŠ¼ í´ë¦­</li>
      <li><strong>ì•„ë˜ ë²„íŠ¼ë“¤ í´ë¦­</strong>: ì¹´ìš´í„° ì¦ê°€, ì…ë ¥, ì•„ì´í…œ ì¶”ê°€ ë“±</li>
      <li><strong>ë…¹í™” ì¤‘ì§€</strong>: ë…¹í™” ë²„íŠ¼ ë‹¤ì‹œ í´ë¦­</li>
      <li><strong>ê²°ê³¼ ë¶„ì„</strong>: ì»´í¬ë„ŒíŠ¸ë³„ ì—…ë°ì´íŠ¸ ì‹œê°„ í™•ì¸</li>
    </ol>
    <p><strong>ğŸ’¡ íŒ:</strong> ë¸Œë¼ìš°ì €ì˜ Performance íƒ­ì—ì„œë„ Vue ì»´í¬ë„ŒíŠ¸ë³„ íƒ€ì´ë°ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (app.config.performance = true ì„¤ì •ë¨)</p>
  </div>

  <div id="app"></div>

  <script>
    const { createApp, ref, computed, reactive, shallowRef, shallowReactive } = Vue;

    // ë Œë”ë§ íšŸìˆ˜ ì¶”ì 
    const renderCounts = reactive({});

    // ë¹„ìš©ì´ í° ê³„ì‚°ì„ ì‹œë®¬ë ˆì´ì…˜í•˜ëŠ” í•¨ìˆ˜
    function expensiveCalculation(label) {
      const start = performance.now();
      while (performance.now() - start < 30) {
        // 30ms ë¸”ë¡œí‚¹
      }
      renderCounts[label] = (renderCounts[label] || 0) + 1;
      return renderCounts[label];
    }

    // ìµœì í™” ì•ˆ ëœ ìì‹ ì»´í¬ë„ŒíŠ¸
    const ExpensiveChildUnoptimized = {
      props: ['data'],
      setup(props) {
        return () => {
          const count = expensiveCalculation('ExpensiveChildUnoptimized');
          return Vue.h('div', { class: 'expensive-box unoptimized' }, [
            Vue.h('span', { class: 'badge badge-warning' }, 'âŒ ìµœì í™” ì•ˆ ë¨ (30ms)'),
            Vue.h('span', { class: 'render-count' }, `ì—…ë°ì´íŠ¸: ${count}íšŒ`),
            Vue.h('p', {}, `ë°ì´í„°: ${props.data}`)
          ]);
        };
      }
    };

    // computedë¥¼ í™œìš©í•œ ìµœì í™”ëœ ìì‹ ì»´í¬ë„ŒíŠ¸
    const ExpensiveChildOptimized = {
      props: ['data'],
      setup(props) {
        // computedë¡œ ìºì‹±
        const cachedResult = computed(() => {
          const count = expensiveCalculation('ExpensiveChildOptimized');
          return { count, data: props.data };
        });

        return () => {
          return Vue.h('div', { class: 'expensive-box optimized' }, [
            Vue.h('span', { class: 'badge badge-success' }, 'âœ… computed ìºì‹±'),
            Vue.h('span', { class: 'render-count' }, `ì—…ë°ì´íŠ¸: ${cachedResult.value.count}íšŒ`),
            Vue.h('p', {}, `ë°ì´í„°: ${cachedResult.value.data}`)
          ]);
        };
      }
    };

    // ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ ì»´í¬ë„ŒíŠ¸
    const ListItem = {
      props: ['item'],
      emits: ['remove'],
      setup(props, { emit }) {
        const updateCount = ref(0);

        return () => {
          updateCount.value++;
          return Vue.h('li', {}, [
            Vue.h('span', {}, props.item.text),
            Vue.h('div', {}, [
              Vue.h('span', { class: 'render-count' }, `ì—…ë°ì´íŠ¸: ${updateCount.value}íšŒ`),
              Vue.h('button', {
                onClick: () => emit('remove', props.item.id),
                style: 'margin-left: 8px; padding: 4px 8px; background: #f44336; color: white; border: none; border-radius: 4px; cursor: pointer;'
              }, 'ì‚­ì œ')
            ])
          ]);
        };
      }
    };

    const app = createApp({
      components: {
        ExpensiveChildUnoptimized,
        ExpensiveChildOptimized,
        ListItem
      },
      setup() {
        const count = ref(0);
        const inputValue = ref('');
        const items = ref([
          { id: 1, text: 'ì•„ì´í…œ 1' },
          { id: 2, text: 'ì•„ì´í…œ 2' },
          { id: 3, text: 'ì•„ì´í…œ 3' },
        ]);
        const staticData = 'ë³€í•˜ì§€ ì•ŠëŠ” ë°ì´í„°';

        // ëŒ€ìš©ëŸ‰ ë°ì´í„° í…ŒìŠ¤íŠ¸ìš©
        const deepData = reactive({
          level1: {
            level2: {
              level3: {
                value: 0
              }
            }
          }
        });

        const shallowData = shallowReactive({
          nested: { value: 0 }
        });

        const addItem = () => {
          const newId = Math.max(0, ...items.value.map(i => i.id)) + 1;
          items.value.push({ id: newId, text: `ì•„ì´í…œ ${newId}` });
        };

        const removeItem = (id) => {
          const index = items.value.findIndex(item => item.id === id);
          if (index > -1) {
            items.value.splice(index, 1);
          }
        };

        const updateDeepData = () => {
          deepData.level1.level2.level3.value++;
        };

        const updateShallowData = () => {
          // shallowReactiveëŠ” 1ë‹¨ê³„ë§Œ ë°˜ì‘í˜•ì´ë¯€ë¡œ ì§ì ‘ ê°ì²´ êµì²´ í•„ìš”
          shallowData.nested = { value: shallowData.nested.value + 1 };
        };

        return {
          count,
          inputValue,
          items,
          staticData,
          deepData,
          shallowData,
          addItem,
          removeItem,
          updateDeepData,
          updateShallowData,
          renderCounts
        };
      },
      template: `
        <div class="app-container">
          <!-- ì„¹ì…˜ 1: ì¹´ìš´í„° -->
          <div class="section">
            <h3>1ï¸âƒ£ ë¶€ëª¨ ì—…ë°ì´íŠ¸ â†’ ìì‹ ì—…ë°ì´íŠ¸ í…ŒìŠ¤íŠ¸</h3>
            <p>ì¹´ìš´í„°ë¥¼ ì¦ê°€ì‹œí‚¤ë©´ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.</p>

            <div class="controls">
              <button class="btn-primary" @click="count++">
                ì¹´ìš´í„° ì¦ê°€
              </button>
              <div class="counter-display">{{ count }}</div>
            </div>

            <ExpensiveChildUnoptimized :data="staticData" />
            <ExpensiveChildOptimized :data="staticData" />

            <div class="warning-box">
              <h4>âš ï¸ Vue DevToolsì—ì„œ í™•ì¸í•  ê²ƒ</h4>
              <ul>
                <li>Vueì˜ ë°˜ì‘í˜• ì‹œìŠ¤í…œì€ ì˜ì¡´ì„±ì„ ìë™ ì¶”ì </li>
                <li><strong>ExpensiveChildUnoptimized</strong>: ë¶€ëª¨ê°€ ì—…ë°ì´íŠ¸ë˜ë©´ ìì‹ë„ ì¬ë Œë”ë§</li>
                <li><strong>ExpensiveChildOptimized</strong>: computed ìºì‹±ìœ¼ë¡œ ë¶ˆí•„ìš”í•œ ì¬ê³„ì‚° ë°©ì§€</li>
                <li>Performance íƒ­ì—ì„œ ê° ì»´í¬ë„ŒíŠ¸ì˜ ì—…ë°ì´íŠ¸ ì‹œê°„ ë¹„êµ</li>
              </ul>
            </div>
          </div>

          <!-- ì„¹ì…˜ 2: ì…ë ¥ í•„ë“œ -->
          <div class="section">
            <h3>2ï¸âƒ£ ì…ë ¥ í•„ë“œ - v-model ì–‘ë°©í–¥ ë°”ì¸ë”©</h3>
            <p>íƒ€ì´í•‘í•  ë•Œë§ˆë‹¤ ìƒíƒœê°€ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.</p>

            <div class="controls">
              <input
                type="text"
                v-model="inputValue"
                placeholder="ì—¬ê¸°ì— íƒ€ì´í•‘í•˜ì„¸ìš”..."
              />
              <span>ì…ë ¥ê°’: {{ inputValue }}</span>
            </div>

            <div class="warning-box">
              <h4>âš ï¸ Vue DevToolsì—ì„œ í™•ì¸í•  ê²ƒ</h4>
              <ul>
                <li>VueëŠ” ë³€ê²½ëœ ë¶€ë¶„ë§Œ ì •í™•íˆ ì—…ë°ì´íŠ¸ (Reactì™€ ë‹¤ë¦„)</li>
                <li>ì…ë ¥ í•„ë“œ ì™¸ì˜ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ëŠ” ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŒ</li>
                <li>Timelineì—ì„œ ì—…ë°ì´íŠ¸ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ ë²”ìœ„ í™•ì¸</li>
              </ul>
            </div>
          </div>

          <!-- ì„¹ì…˜ 3: reactive vs shallowReactive -->
          <div class="section">
            <h3>3ï¸âƒ£ reactive vs shallowReactive ë¹„êµ</h3>
            <p>ê¹Šì€ ë°˜ì‘ì„±ê³¼ ì–•ì€ ë°˜ì‘ì„±ì˜ ì°¨ì´ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.</p>

            <div class="controls">
              <button class="btn-primary" @click="updateDeepData">
                reactive ì—…ë°ì´íŠ¸ (ê¹Šì€ ë°˜ì‘ì„±)
              </button>
              <span>ê°’: {{ deepData.level1.level2.level3.value }}</span>
            </div>

            <div class="controls">
              <button class="btn-primary" @click="updateShallowData">
                shallowReactive ì—…ë°ì´íŠ¸ (ì–•ì€ ë°˜ì‘ì„±)
              </button>
              <span>ê°’: {{ shallowData.nested.value }}</span>
            </div>

            <div class="warning-box">
              <h4>âš ï¸ ì„±ëŠ¥ íŒ</h4>
              <ul>
                <li><strong>reactive</strong>: ëª¨ë“  ì¤‘ì²© ê°ì²´ë¥¼ í”„ë¡ì‹œë¡œ ê°ì‹¸ë¯€ë¡œ ëŒ€ìš©ëŸ‰ ë°ì´í„°ì—ì„œ ì˜¤ë²„í—¤ë“œ ë°œìƒ</li>
                <li><strong>shallowReactive</strong>: 1ë‹¨ê³„ë§Œ ë°˜ì‘í˜•, ëŒ€ìš©ëŸ‰ ë°ì´í„°ì— ì í•©</li>
                <li>ëŒ€ìš©ëŸ‰ ë¦¬ìŠ¤íŠ¸ë‚˜ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°ì²´ëŠ” shallowRef/shallowReactive ì‚¬ìš© ê¶Œì¥</li>
              </ul>
            </div>
          </div>

          <!-- ì„¹ì…˜ 4: ë¦¬ìŠ¤íŠ¸ -->
          <div class="section">
            <h3>4ï¸âƒ£ ë¦¬ìŠ¤íŠ¸ ë Œë”ë§</h3>
            <p>ì•„ì´í…œì„ ì¶”ê°€/ì‚­ì œí•  ë•Œ ì–´ë–¤ ì•„ì´í…œì´ ì—…ë°ì´íŠ¸ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ì„¸ìš”.</p>

            <div class="controls">
              <button class="btn-primary" @click="addItem">
                ì•„ì´í…œ ì¶”ê°€
              </button>
            </div>

            <ul class="item-list">
              <ListItem
                v-for="item in items"
                :key="item.id"
                :item="item"
                @remove="removeItem"
              />
            </ul>

            <div class="warning-box">
              <h4>âš ï¸ Vue DevToolsì—ì„œ í™•ì¸í•  ê²ƒ</h4>
              <ul>
                <li>VueëŠ” :keyë¥¼ ì‚¬ìš©í•´ ë³€ê²½ëœ ì•„ì´í…œë§Œ ì—…ë°ì´íŠ¸</li>
                <li>ì•„ì´í…œ ì‚­ì œ ì‹œ ë‹¤ë¥¸ ì•„ì´í…œì€ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŒ</li>
                <li>:keyê°€ ì—†ìœ¼ë©´ ì „ì²´ ë¦¬ìŠ¤íŠ¸ê°€ ì¬ë Œë”ë§ë  ìˆ˜ ìˆìŒ</li>
              </ul>
            </div>
          </div>

          <!-- ìš”ì•½ -->
          <div class="section" style="background: #e8f5e9;">
            <h3>ğŸ“Š Vue ì„±ëŠ¥ ìµœì í™” ìš”ì•½</h3>
            <table style="width: 100%; border-collapse: collapse;">
              <thead>
                <tr style="background: #c8e6c9;">
                  <th style="padding: 10px; text-align: left; border: 1px solid #a5d6a7;">ê¸°ë²•</th>
                  <th style="padding: 10px; text-align: left; border: 1px solid #a5d6a7;">ìš©ë„</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td style="padding: 10px; border: 1px solid #a5d6a7;">computed</td>
                  <td style="padding: 10px; border: 1px solid #a5d6a7;">ì˜ì¡´ì„±ì´ ë°”ë€” ë•Œë§Œ ì¬ê³„ì‚°</td>
                </tr>
                <tr>
                  <td style="padding: 10px; border: 1px solid #a5d6a7;">shallowRef / shallowReactive</td>
                  <td style="padding: 10px; border: 1px solid #a5d6a7;">ëŒ€ìš©ëŸ‰ ë°ì´í„°ì˜ ê¹Šì€ ë°˜ì‘ì„± ì˜¤ë²„í—¤ë“œ ë°©ì§€</td>
                </tr>
                <tr>
                  <td style="padding: 10px; border: 1px solid #a5d6a7;">v-once</td>
                  <td style="padding: 10px; border: 1px solid #a5d6a7;">í•œ ë²ˆë§Œ ë Œë”ë§ë˜ëŠ” ì •ì  ì½˜í…ì¸ </td>
                </tr>
                <tr>
                  <td style="padding: 10px; border: 1px solid #a5d6a7;">v-memo</td>
                  <td style="padding: 10px; border: 1px solid #a5d6a7;">ì¡°ê±´ë¶€ ë©”ëª¨ì´ì œì´ì…˜ (v-for ë‚´ë¶€)</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      `
    });

    // ê°œë°œ ëª¨ë“œì—ì„œ ì„±ëŠ¥ ì¶”ì  í™œì„±í™”
    app.config.performance = true;

    app.mount('#app');

    console.log('âœ… Vue ì•±ì´ ë§ˆìš´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.');
    console.log('ğŸ“Š Vue DevToolsì˜ Performance íƒ­ì—ì„œ ì»´í¬ë„ŒíŠ¸ ì—…ë°ì´íŠ¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.');
    console.log('ğŸ’¡ ë¸Œë¼ìš°ì € Performance íƒ­ì—ì„œë„ Vue ì»´í¬ë„ŒíŠ¸ë³„ íƒ€ì´ë°ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
  </script>
</body>
</html>
