<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2. defer ìŠ¤í¬ë¦½íŠ¸ (ê°€ë²¼ìš´)</title>
    <style>
      body {
        font-family: system-ui, sans-serif;
        max-width: 800px;
        margin: 40px auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .card {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }
      h1 {
        color: #38a169;
      }
      pre {
        background: #1a202c;
        color: #f7fafc;
        padding: 15px;
        border-radius: 4px;
        overflow-x: auto;
      }
      .info {
        background: #f0fff4;
        border-left: 4px solid #38a169;
        padding: 15px;
        margin: 15px 0;
      }
      code {
        background: #edf2f7;
        padding: 2px 6px;
        border-radius: 3px;
        font-family: 'Monaco', 'Courier New', monospace;
      }
    </style>

    <script>
      console.log('â° [inline] <head> ì‹œì‘ -', new Date().toISOString())
    </script>

    <!-- âœ… defer ìŠ¤í¬ë¦½íŠ¸ - HTML íŒŒì‹± ë¸”ë¡œí‚¹ ì•ˆ í•¨ -->
    <script defer src="./scripts/light-script.js"></script>

    <script>
      console.log('â° [inline] <head> ë (deferëŠ” ë¸”ë¡œí‚¹ ì•ˆ í•¨) -', new Date().toISOString())

      // DOMContentLoaded ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
      document.addEventListener('DOMContentLoaded', () => {
        console.log('ğŸ‰ [DOMContentLoaded] ë°œìƒ -', new Date().toISOString())

        const eventLog = document.getElementById('event-log')
        if (eventLog) {
          eventLog.textContent = 'âœ… DOMContentLoaded ë°œìƒ ì™„ë£Œ'
        }
      })
    </script>
  </head>
  <body>
    <script>
      console.log('â° [inline] <body> ì‹œì‘ -', new Date().toISOString())
    </script>

    <div class="card">
      <h1>âœ… ì‹œë‚˜ë¦¬ì˜¤ 2: defer ìŠ¤í¬ë¦½íŠ¸ (ê°€ë²¼ìš´)</h1>
      <p><code>&lt;script defer&gt;</code> íƒœê·¸ëŠ” HTML íŒŒì‹±ì„ ë¸”ë¡œí‚¹í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
      <p>HTML íŒŒì‹± ì™„ë£Œ í›„, DOMContentLoaded ë°œìƒ ì§ì „ì— ì‹¤í–‰ë©ë‹ˆë‹¤.</p>
    </div>

    <div class="card">
      <h2>ğŸ“‹ í…ŒìŠ¤íŠ¸ ë°©ë²•</h2>
      <ol>
        <li>í¬ë¡¬ ê°œë°œì ë„êµ¬ ì—´ê¸° (F12)</li>
        <li><strong>Performance íƒ­</strong> ì„ íƒ</li>
        <li>ì™¼ìª½ ìœ„ <strong>Record ë²„íŠ¼ (â—)</strong> í´ë¦­</li>
        <li><strong>í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨</strong> (Cmd+R ë˜ëŠ” Ctrl+R)</li>
        <li>ëª‡ ì´ˆ í›„ <strong>Stop ë²„íŠ¼ (â– )</strong> í´ë¦­</li>
      </ol>
    </div>

    <div class="card">
      <h2>ğŸ” í™•ì¸ ì‚¬í•­</h2>
      <div class="info">
        <strong>âœ… defer ë™ì‘ í™•ì¸:</strong>
        <ul>
          <li>"Parse HTML"ì´ ì¤‘ë‹¨ ì—†ì´ ì—°ì†ìœ¼ë¡œ ì§„í–‰ë¨</li>
          <li>HTML íŒŒì‹± ì™„ë£Œ í›„ "Evaluate Script - light-script.js" ì‹¤í–‰</li>
          <li>
            <strong>"DOMContentLoaded" ë§ˆì»¤ ë°”ë¡œ ì§ì „ì— "Evaluate Script"ê°€ ìˆìŒ</strong>
          </li>
          <li>ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ì´ ë¹ ë¥´ë¯€ë¡œ (~10ms) ê°„ê²©ì´ ê±°ì˜ ì—†ìŒ</li>
        </ul>
      </div>
    </div>

    <div class="card">
      <h2>ğŸ“Š ì˜ˆìƒ íƒ€ì„ë¼ì¸</h2>
      <pre>
Main Thread:
â”œâ”€ Parse HTML (0~500ms) â† ì¤‘ë‹¨ ì—†ìŒ
â”œâ”€ Evaluate Script - light-script.js (500~510ms) â† íŒŒì‹± ì™„ë£Œ í›„
â””â”€ DOMContentLoaded (510ms) â† ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì§í›„
      </pre>
    </div>

    <div class="card">
      <h2>ğŸ“ ì½˜ì†” ì¶œë ¥</h2>
      <p>ì½˜ì†”ì—ì„œ ë‹¤ìŒ ìˆœì„œë¡œ ë¡œê·¸ê°€ ì¶œë ¥ë©ë‹ˆë‹¤:</p>
      <ol>
        <li><code>â° [inline] &lt;head&gt; ì‹œì‘</code></li>
        <li><code>â° [inline] &lt;head&gt; ë</code> (deferëŠ” ë¸”ë¡œí‚¹ ì•ˆ í•¨)</li>
        <li><code>â° [inline] &lt;body&gt; ì‹œì‘</code></li>
        <li><code>â° [inline] &lt;body&gt; ë</code></li>
        <li>
          <code>âœ… [light-script.js] ì‹¤í–‰ ì‹œì‘</code> (HTML íŒŒì‹± ì™„ë£Œ í›„)
        </li>
        <li><code>âœ… [light-script.js] ì‹¤í–‰ ì™„ë£Œ - ~10ms</code></li>
        <li><code>ğŸ‰ [DOMContentLoaded] ë°œìƒ</code> (ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì§í›„)</li>
      </ol>
    </div>

    <div class="card">
      <h2>ğŸ¯ í•µì‹¬ í¬ì¸íŠ¸</h2>
      <ul>
        <li>defer ìŠ¤í¬ë¦½íŠ¸ëŠ” HTML íŒŒì‹±ì„ ë¸”ë¡œí‚¹í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤</li>
        <li>ë‹¤ìš´ë¡œë“œëŠ” ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì§„í–‰ë©ë‹ˆë‹¤</li>
        <li>ì‹¤í–‰ì€ HTML íŒŒì‹± ì™„ë£Œ í›„, DOMContentLoaded ë°œìƒ ì „ì…ë‹ˆë‹¤</li>
        <li>ê°€ë²¼ìš´ ìŠ¤í¬ë¦½íŠ¸ëŠ” DOMContentLoadedë¥¼ ê±°ì˜ ì§€ì—°ì‹œí‚¤ì§€ ì•ŠìŠµë‹ˆë‹¤</li>
      </ul>
    </div>

    <div class="card">
      <h2>âœ… ì´ë²¤íŠ¸ ìƒíƒœ</h2>
      <p id="event-log">ëŒ€ê¸° ì¤‘...</p>
    </div>

    <script>
      console.log('â° [inline] <body> ë -', new Date().toISOString())
    </script>
  </body>
</html>
