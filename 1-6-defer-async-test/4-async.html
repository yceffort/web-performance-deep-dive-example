<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>4. async ìŠ¤í¬ë¦½íŠ¸</title>
    <style>
      body {
        font-family: system-ui, sans-serif;
        max-width: 800px;
        margin: 40px auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .card {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }
      h1 {
        color: #3182ce;
      }
      pre {
        background: #1a202c;
        color: #f7fafc;
        padding: 15px;
        border-radius: 4px;
        overflow-x: auto;
      }
      .info {
        background: #ebf8ff;
        border-left: 4px solid #3182ce;
        padding: 15px;
        margin: 15px 0;
      }
      code {
        background: #edf2f7;
        padding: 2px 6px;
        border-radius: 3px;
        font-family: 'Monaco', 'Courier New', monospace;
      }
    </style>

    <script>
      console.log('â° [inline] <head> ì‹œì‘ -', new Date().toISOString())
    </script>

    <!-- ğŸ“Š async ìŠ¤í¬ë¦½íŠ¸ - ë‹¤ìš´ë¡œë“œ ì™„ë£Œ ì¦‰ì‹œ ì‹¤í–‰ -->
    <script async src="./scripts/analytics.js"></script>

    <script>
      console.log('â° [inline] <head> ë (asyncëŠ” ë¸”ë¡œí‚¹ ì•ˆ í•¨) -', new Date().toISOString())

      // DOMContentLoaded ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
      document.addEventListener('DOMContentLoaded', () => {
        console.log('ğŸ‰ [DOMContentLoaded] ë°œìƒ -', new Date().toISOString())
        console.log('ğŸ‰ [DOMContentLoaded] async ìŠ¤í¬ë¦½íŠ¸ë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•ŠìŒ')

        const eventLog = document.getElementById('event-log')
        if (eventLog) {
          eventLog.textContent = 'âœ… DOMContentLoaded ë°œìƒ ì™„ë£Œ'
        }
      })
    </script>
  </head>
  <body>
    <script>
      console.log('â° [inline] <body> ì‹œì‘ -', new Date().toISOString())
    </script>

    <div class="card">
      <h1>ğŸ“Š ì‹œë‚˜ë¦¬ì˜¤ 4: async ìŠ¤í¬ë¦½íŠ¸</h1>
      <p><code>&lt;script async&gt;</code> íƒœê·¸ëŠ” ë‹¤ìš´ë¡œë“œ ì™„ë£Œ ì¦‰ì‹œ ì‹¤í–‰ë©ë‹ˆë‹¤.</p>
      <p>DOMContentLoadedëŠ” async ìŠ¤í¬ë¦½íŠ¸ë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
    </div>

    <div class="card">
      <h2>ğŸ“‹ í…ŒìŠ¤íŠ¸ ë°©ë²•</h2>
      <ol>
        <li>í¬ë¡¬ ê°œë°œì ë„êµ¬ ì—´ê¸° (F12)</li>
        <li><strong>Performance íƒ­</strong> ì„ íƒ</li>
        <li>ì™¼ìª½ ìœ„ <strong>Record ë²„íŠ¼ (â—)</strong> í´ë¦­</li>
        <li><strong>í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨</strong> (Cmd+R ë˜ëŠ” Ctrl+R)</li>
        <li>ëª‡ ì´ˆ í›„ <strong>Stop ë²„íŠ¼ (â– )</strong> í´ë¦­</li>
      </ol>
    </div>

    <div class="card">
      <h2>ğŸ” í™•ì¸ ì‚¬í•­</h2>
      <div class="info">
        <strong>ğŸ“Š async ë™ì‘ í™•ì¸:</strong>
        <ul>
          <li>"Evaluate Script"ê°€ HTML íŒŒì‹± ì¤‘ê°„ì— ì‹¤í–‰ë  ìˆ˜ ìˆìŒ</li>
          <li>ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì‹œ HTML íŒŒì‹±ì´ ì ì‹œ ì¤‘ë‹¨ë¨</li>
          <li>
            <strong>DOMContentLoadedê°€ async ìŠ¤í¬ë¦½íŠ¸ë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•ŠìŒ</strong>
          </li>
          <li>ì½˜ì†” ì¶œë ¥ ìˆœì„œëŠ” ë§¤ë²ˆ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŒ (ë„¤íŠ¸ì›Œí¬ ìƒí™©ì— ë”°ë¼)</li>
        </ul>
      </div>
    </div>

    <div class="card">
      <h2>ğŸ“Š ì˜ˆìƒ íƒ€ì„ë¼ì¸ (ë‹¤ìš´ë¡œë“œê°€ ë¹ ë¥¸ ê²½ìš°)</h2>
      <pre>
Main Thread:
â”œâ”€ Parse HTML (0~200ms)
â”œâ”€ Evaluate Script - analytics.js (200~210ms) â† íŒŒì‹± ì¤‘ë‹¨
â”œâ”€ Parse HTML (210~500ms)
â””â”€ DOMContentLoaded (500ms) â† async ìŠ¤í¬ë¦½íŠ¸ì™€ ë¬´ê´€
      </pre>
    </div>

    <div class="card">
      <h2>ğŸ“Š ì˜ˆìƒ íƒ€ì„ë¼ì¸ (ë‹¤ìš´ë¡œë“œê°€ ëŠë¦° ê²½ìš°)</h2>
      <pre>
Main Thread:
â”œâ”€ Parse HTML (0~500ms)
â”œâ”€ DOMContentLoaded (500ms) â† asyncë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•ŠìŒ
â””â”€ Evaluate Script - analytics.js (800ms) â† ë‚˜ì¤‘ì— ì‹¤í–‰
      </pre>
    </div>

    <div class="card">
      <h2>ğŸ“ ì½˜ì†” ì¶œë ¥ (ê²½ìš° 1: ë¹ ë¥¸ ë‹¤ìš´ë¡œë“œ)</h2>
      <ol>
        <li><code>â° [inline] &lt;head&gt; ì‹œì‘</code></li>
        <li><code>â° [inline] &lt;head&gt; ë</code></li>
        <li><code>â° [inline] &lt;body&gt; ì‹œì‘</code></li>
        <li><code>ğŸ“Š [analytics.js] ì‹¤í–‰ ì‹œì‘</code> â­ (íŒŒì‹± ì¤‘)</li>
        <li><code>ğŸ“Š [analytics.js] ì‹¤í–‰ ì™„ë£Œ</code></li>
        <li><code>â° [inline] &lt;body&gt; ë</code></li>
        <li><code>ğŸ‰ [DOMContentLoaded] ë°œìƒ</code></li>
      </ol>
    </div>

    <div class="card">
      <h2>ğŸ“ ì½˜ì†” ì¶œë ¥ (ê²½ìš° 2: ëŠë¦° ë‹¤ìš´ë¡œë“œ)</h2>
      <ol>
        <li><code>â° [inline] &lt;head&gt; ì‹œì‘</code></li>
        <li><code>â° [inline] &lt;head&gt; ë</code></li>
        <li><code>â° [inline] &lt;body&gt; ì‹œì‘</code></li>
        <li><code>â° [inline] &lt;body&gt; ë</code></li>
        <li><code>ğŸ‰ [DOMContentLoaded] ë°œìƒ</code> â­ (async ì „ì— ë°œìƒ)</li>
        <li><code>ğŸ“Š [analytics.js] ì‹¤í–‰ ì‹œì‘</code> â­ (DOMContentLoaded í›„)</li>
        <li><code>ğŸ“Š [analytics.js] ì‹¤í–‰ ì™„ë£Œ</code></li>
      </ol>
    </div>

    <div class="card">
      <h2>ğŸ¯ í•µì‹¬ í¬ì¸íŠ¸</h2>
      <ul>
        <li>async ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‹¤ìš´ë¡œë“œ ì™„ë£Œ ì¦‰ì‹œ ì‹¤í–‰ë©ë‹ˆë‹¤</li>
        <li>ì‹¤í–‰ ì‹œ HTML íŒŒì‹±ì„ ì ì‹œ ì¤‘ë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
        <li>
          <strong>DOMContentLoadedëŠ” async ìŠ¤í¬ë¦½íŠ¸ë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤</strong>
        </li>
        <li>ì‹¤í–‰ ìˆœì„œë¥¼ ì˜ˆì¸¡í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ë…ë¦½ì ì¸ ì½”ë“œì—ë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤</li>
      </ul>
    </div>

    <div class="card">
      <h2>ğŸ’¡ defer vs async ì°¨ì´</h2>
      <table style="width: 100%; border-collapse: collapse;">
        <tr style="background: #edf2f7;">
          <th style="padding: 10px; text-align: left; border: 1px solid #cbd5e0;">
            íŠ¹ì§•
          </th>
          <th style="padding: 10px; text-align: left; border: 1px solid #cbd5e0;">
            defer
          </th>
          <th style="padding: 10px; text-align: left; border: 1px solid #cbd5e0;">
            async
          </th>
        </tr>
        <tr>
          <td style="padding: 10px; border: 1px solid #cbd5e0;">ì‹¤í–‰ ì‹œì </td>
          <td style="padding: 10px; border: 1px solid #cbd5e0;">HTML íŒŒì‹± ì™„ë£Œ í›„</td>
          <td style="padding: 10px; border: 1px solid #cbd5e0;">ë‹¤ìš´ë¡œë“œ ì™„ë£Œ ì¦‰ì‹œ</td>
        </tr>
        <tr>
          <td style="padding: 10px; border: 1px solid #cbd5e0;">íŒŒì‹± ì¤‘ë‹¨</td>
          <td style="padding: 10px; border: 1px solid #cbd5e0;">ì—†ìŒ</td>
          <td style="padding: 10px; border: 1px solid #cbd5e0;">ê°€ëŠ¥</td>
        </tr>
        <tr>
          <td style="padding: 10px; border: 1px solid #cbd5e0;">
            DOMContentLoaded
          </td>
          <td style="padding: 10px; border: 1px solid #cbd5e0;">
            ì‹¤í–‰ ì™„ë£Œ í›„ ë°œìƒ
          </td>
          <td style="padding: 10px; border: 1px solid #cbd5e0;">ëŒ€ê¸° ì•ˆ í•¨</td>
        </tr>
        <tr>
          <td style="padding: 10px; border: 1px solid #cbd5e0;">ì‚¬ìš© ì‚¬ë¡€</td>
          <td style="padding: 10px; border: 1px solid #cbd5e0;">
            ì•± ì½”ë“œ, ë¼ì´ë¸ŒëŸ¬ë¦¬
          </td>
          <td style="padding: 10px; border: 1px solid #cbd5e0;">ë¶„ì„, ê´‘ê³ , ìœ„ì ¯</td>
        </tr>
      </table>
    </div>

    <div class="card">
      <h2>âœ… ì´ë²¤íŠ¸ ìƒíƒœ</h2>
      <p id="event-log">ëŒ€ê¸° ì¤‘...</p>
    </div>

    <script>
      console.log('â° [inline] <body> ë -', new Date().toISOString())
    </script>
  </body>
</html>
