<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>6. ì—¬ëŸ¬ ê°œì˜ defer ìŠ¤í¬ë¦½íŠ¸ - ìˆœì„œ ë³´ì¥</title>
    <style>
      body {
        font-family: system-ui, sans-serif;
        max-width: 800px;
        margin: 40px auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .card {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }
      h1 {
        color: #48bb78;
      }
      pre {
        background: #1a202c;
        color: #f7fafc;
        padding: 15px;
        border-radius: 4px;
        overflow-x: auto;
      }
      .highlight {
        background: #f0fff4;
        border-left: 4px solid #48bb78;
        padding: 15px;
        margin: 15px 0;
      }
      code {
        background: #edf2f7;
        padding: 2px 6px;
        border-radius: 3px;
        font-family: 'Monaco', 'Courier New', monospace;
      }
      .order {
        font-size: 20px;
        font-weight: bold;
        color: #48bb78;
      }
      #status {
        font-size: 18px;
        font-weight: bold;
        color: #2d3748;
      }
      .time-info {
        background: #edf2f7;
        padding: 10px;
        border-radius: 4px;
        margin: 5px 0;
      }
    </style>

    <script>
      console.log('â° [inline] <head> ì‹œì‘ -', new Date().toISOString())
    </script>

    <!-- âœ… ì—¬ëŸ¬ defer ìŠ¤í¬ë¦½íŠ¸ - HTML ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ -->
    <script defer src="./scripts/jquery-sim.js"></script>
    <!-- 500ms ë‹¤ìš´ë¡œë“œ -->
    <script defer src="./scripts/plugin-sim.js"></script>
    <!-- 200ms ë‹¤ìš´ë¡œë“œ (ë¨¼ì € ì™„ë£Œ) -->
    <script defer src="./scripts/app-sim.js"></script>
    <!-- 300ms ë‹¤ìš´ë¡œë“œ -->

    <script>
      console.log('â° [inline] <head> ë -', new Date().toISOString())

      document.addEventListener('DOMContentLoaded', () => {
        console.log('ğŸ‰ [DOMContentLoaded] ë°œìƒ -', new Date().toISOString())
        console.log('ğŸ‰ [DOMContentLoaded] ëª¨ë“  defer ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì™„ë£Œ í›„ ë°œìƒ')
      })
    </script>
  </head>
  <body>
    <script>
      console.log('â° [inline] <body> ì‹œì‘ -', new Date().toISOString())
    </script>

    <div class="card">
      <h1>âœ… ì‹œë‚˜ë¦¬ì˜¤ 6: ì—¬ëŸ¬ ê°œì˜ defer ìŠ¤í¬ë¦½íŠ¸</h1>
      <p>ì—¬ëŸ¬ defer ìŠ¤í¬ë¦½íŠ¸ëŠ” ë³‘ë ¬ë¡œ ë‹¤ìš´ë¡œë“œë˜ì§€ë§Œ, HTML ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.</p>
      <p class="order">â­ í•µì‹¬: ë‹¤ìš´ë¡œë“œ ìˆœì„œ â‰  ì‹¤í–‰ ìˆœì„œ</p>
    </div>

    <div class="card">
      <h2>ğŸ“‹ ì„ ì–¸ëœ ìŠ¤í¬ë¦½íŠ¸ ìˆœì„œ</h2>
      <ol>
        <li>
          <code>&lt;script defer src="jquery-sim.js"&gt;</code> - ë‹¤ìš´ë¡œë“œ 500ms (ê°€ì¥
          ëŠë¦¼)
        </li>
        <li>
          <code>&lt;script defer src="plugin-sim.js"&gt;</code> - ë‹¤ìš´ë¡œë“œ 200ms
          (ê°€ì¥ ë¹ ë¦„)
        </li>
        <li>
          <code>&lt;script defer src="app-sim.js"&gt;</code> - ë‹¤ìš´ë¡œë“œ 300ms
        </li>
      </ol>
    </div>

    <div class="card">
      <h2>ğŸ“Š ì˜ˆìƒ ë™ì‘</h2>
      <div class="highlight">
        <strong>ë‹¤ìš´ë¡œë“œ (ë³‘ë ¬):</strong>
        <ul>
          <li>plugin-sim.js ì™„ë£Œ (200ms) â† ê°€ì¥ ë¨¼ì € ì™„ë£Œ</li>
          <li>app-sim.js ì™„ë£Œ (300ms)</li>
          <li>jquery-sim.js ì™„ë£Œ (500ms) â† ê°€ì¥ ë‚˜ì¤‘ì— ì™„ë£Œ</li>
        </ul>
        <strong>ì‹¤í–‰ (ìˆœì°¨, HTML ìˆœì„œëŒ€ë¡œ):</strong>
        <ol>
          <li>jquery-sim.js ì‹¤í–‰ (500ms ëŒ€ê¸° í›„) â† 1ë²ˆìœ¼ë¡œ ì‹¤í–‰</li>
          <li>plugin-sim.js ì‹¤í–‰ (jQuery ì˜ì¡´) â† 2ë²ˆìœ¼ë¡œ ì‹¤í–‰</li>
          <li>app-sim.js ì‹¤í–‰ (Plugin ì˜ì¡´) â† 3ë²ˆìœ¼ë¡œ ì‹¤í–‰</li>
        </ol>
        <p style="margin-top: 10px; font-weight: bold;">
          â­ ê°€ì¥ ëŠë¦° ìŠ¤í¬ë¦½íŠ¸(jquery-sim.js) ë‹¤ìš´ë¡œë“œê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ëª¨ë‘ ëŒ€ê¸°
        </p>
      </div>
    </div>

    <div class="card">
      <h2>ğŸ” Performance íƒ­ì—ì„œ í™•ì¸í•  ì‚¬í•­</h2>
      <ol>
        <li>Network íƒ­ì—ì„œ 3ê°œ ìŠ¤í¬ë¦½íŠ¸ê°€ ë³‘ë ¬ë¡œ ë‹¤ìš´ë¡œë“œë˜ëŠ” ê²ƒ í™•ì¸</li>
        <li>plugin-sim.jsê°€ ë¨¼ì € ì™„ë£Œë˜ì§€ë§Œ ì‹¤í–‰ì€ ëŒ€ê¸°</li>
        <li>jquery-sim.js ë‹¤ìš´ë¡œë“œ ì™„ë£Œ í›„ì—ì•¼ ì‹¤í–‰ ì‹œì‘</li>
        <li>Main íŠ¸ë™ì—ì„œ ì„¸ ìŠ¤í¬ë¦½íŠ¸ê°€ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒ í™•ì¸:</li>
      </ol>
      <pre>
Main Thread (HTML íŒŒì‹± ì™„ë£Œ í›„):
â”œâ”€ Evaluate Script - jquery-sim.js   (500ms)
â”œâ”€ Evaluate Script - plugin-sim.js   (200ms)
â”œâ”€ Evaluate Script - app-sim.js      (300ms)
â””â”€ DOMContentLoaded (ì´ 1000ms ì‹¤í–‰ ì‹œê°„)
      </pre>
    </div>

    <div class="card">
      <h2>ğŸ“ ì½˜ì†” ì¶œë ¥ ìˆœì„œ</h2>
      <p>ì½˜ì†”ì—ì„œ ë‹¤ìŒ ìˆœì„œë¡œ ë¡œê·¸ê°€ ì¶œë ¥ë©ë‹ˆë‹¤:</p>
      <ol>
        <li><code>â° [inline] &lt;head&gt; ì‹œì‘</code></li>
        <li><code>â° [inline] &lt;head&gt; ë</code></li>
        <li><code>â° [inline] &lt;body&gt; ì‹œì‘</code></li>
        <li><code>â° [inline] &lt;body&gt; ë</code></li>
        <li>
          <code>ğŸ“š [1. jquery-sim.js] ì‹¤í–‰ ì‹œì‘</code> â­ (HTML íŒŒì‹± ì™„ë£Œ í›„, 1ë²ˆì§¸)
        </li>
        <li><code>ğŸ“š [1. jquery-sim.js] ì‹¤í–‰ ì™„ë£Œ - ~500ms</code></li>
        <li><code>ğŸ”Œ [2. plugin-sim.js] ì‹¤í–‰ ì‹œì‘</code> â­ (2ë²ˆì§¸)</li>
        <li><code>ğŸ”Œ [2. plugin-sim.js] ì‹¤í–‰ ì™„ë£Œ - ~200ms</code></li>
        <li><code>ğŸš€ [3. app-sim.js] ì‹¤í–‰ ì‹œì‘</code> â­ (3ë²ˆì§¸)</li>
        <li><code>ğŸš€ [3. app-sim.js] ì‹¤í–‰ ì™„ë£Œ - ~300ms</code></li>
        <li><code>ğŸ‰ [DOMContentLoaded] ë°œìƒ</code> â­ (ëª¨ë“  ì‹¤í–‰ ì™„ë£Œ í›„)</li>
      </ol>
    </div>

    <div class="card">
      <h2>ğŸ¯ í•µì‹¬ í¬ì¸íŠ¸</h2>
      <ul>
        <li>
          <strong>ë‹¤ìš´ë¡œë“œëŠ” ë³‘ë ¬</strong>: ì„¸ ìŠ¤í¬ë¦½íŠ¸ê°€ ë™ì‹œì— ë‹¤ìš´ë¡œë“œ ì‹œì‘
        </li>
        <li>
          <strong>ì‹¤í–‰ì€ ìˆœì°¨</strong>: HTMLì— ì„ ì–¸ëœ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ (jquery â†’ plugin
          â†’ app)
        </li>
        <li>
          <strong>ê°€ì¥ ëŠë¦° ìŠ¤í¬ë¦½íŠ¸ë¥¼ ëŒ€ê¸°</strong>: jquery-sim.js ë‹¤ìš´ë¡œë“œê°€ ëë‚ 
          ë•Œê¹Œì§€ ëª¨ë‘ ëŒ€ê¸°
        </li>
        <li>
          <strong>ì˜ì¡´ì„± ì•ˆì „</strong>: pluginì€ jQueryì—, appì€ pluginì— ì˜ì¡´í•˜ë¯€ë¡œ
          ìˆœì„œ ë³´ì¥ì´ í•„ìˆ˜
        </li>
        <li>
          <strong>DOMContentLoaded ì§€ì—°</strong>: ëª¨ë“  defer ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì™„ë£Œ í›„
          ë°œìƒ (ì•½ 1ì´ˆ ì§€ì—°)
        </li>
      </ul>
    </div>

    <div class="card">
      <h2>âš ï¸ ë§Œì•½ asyncë¥¼ ì‚¬ìš©í–ˆë‹¤ë©´?</h2>
      <pre style="background: #fff5f5; color: #c53030; border: 2px solid #fc8181;">
âŒ plugin-sim.jsê°€ ë¨¼ì € ì™„ë£Œ (200ms)
   â†’ jQuery ì—†ì´ ì‹¤í–‰ ì‹œë„
   â†’ ERROR: jQueryê°€ ì—†ìŠµë‹ˆë‹¤!
   â†’ ì•± í¬ë˜ì‹œ
      </pre>
      <p>
        <strong>ê²°ë¡ :</strong> ì˜ì¡´ì„±ì´ ìˆëŠ” ìŠ¤í¬ë¦½íŠ¸ëŠ” ë°˜ë“œì‹œ <code>defer</code>ë¥¼
        ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
      </p>
    </div>

    <div class="card">
      <h2>âœ… ì‹¤í–‰ ê²°ê³¼</h2>
      <div id="status">ëŒ€ê¸° ì¤‘...</div>
      <div class="time-info" id="jquery-time">ğŸ“š jQuery: ëŒ€ê¸° ì¤‘...</div>
      <div class="time-info" id="plugin-time">ğŸ”Œ Plugin: ëŒ€ê¸° ì¤‘...</div>
      <div class="time-info" id="app-time">ğŸš€ App: ëŒ€ê¸° ì¤‘...</div>
      <p style="color: #718096; font-size: 14px; margin-top: 10px;">
        (ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì¤‘ì—ëŠ” ì•„ë¬´ê²ƒë„ í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëª¨ë“  ì‹¤í–‰ ì™„ë£Œ í›„ ìœ„
        ì •ë³´ê°€ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.)
      </p>
    </div>

    <div class="card">
      <h2>ğŸ“Š ë‹¤ë¥¸ ì‹œë‚˜ë¦¬ì˜¤ ë¹„êµ</h2>
      <ul>
        <li>
          <a href="./2-defer-light.html">2-defer-light.html</a>: ë‹¨ì¼ defer
          ìŠ¤í¬ë¦½íŠ¸ (ê°€ë²¼ìš´)
        </li>
        <li>
          <a href="./3-defer-heavy.html">3-defer-heavy.html</a>: ë‹¨ì¼ defer
          ìŠ¤í¬ë¦½íŠ¸ (ë¬´ê±°ìš´)
        </li>
        <li><strong>í˜„ì¬ í˜ì´ì§€</strong>: ì—¬ëŸ¬ defer ìŠ¤í¬ë¦½íŠ¸ (ì˜ì¡´ì„± ìˆìŒ)</li>
      </ul>
    </div>

    <script>
      console.log('â° [inline] <body> ë -', new Date().toISOString())
    </script>
  </body>
</html>
