<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>deferì™€ module í˜¼ìš© ì‹¤í–‰ ìˆœì„œ í…ŒìŠ¤íŠ¸</title>
    <style>
      body {
        font-family: 'Courier New', monospace;
        max-width: 1000px;
        margin: 50px auto;
        padding: 20px;
        background: #1e1e1e;
        color: #d4d4d4;
      }
      h1 {
        color: #4ec9b0;
        border-bottom: 2px solid #4ec9b0;
        padding-bottom: 10px;
      }
      .log-container {
        background: #252526;
        border: 1px solid #3e3e42;
        border-radius: 5px;
        padding: 20px;
        margin: 20px 0;
        min-height: 400px;
      }
      .log-entry {
        padding: 8px 12px;
        margin: 5px 0;
        border-left: 3px solid;
        background: rgba(255, 255, 255, 0.05);
        font-size: 14px;
      }
      .log-inline {
        border-left-color: #ce9178;
      }
      .log-regular {
        border-left-color: #dcdcaa;
      }
      .log-defer {
        border-left-color: #4ec9b0;
      }
      .log-module {
        border-left-color: #569cd6;
      }
      .log-async-module {
        border-left-color: #c586c0;
      }
      .log-event {
        border-left-color: #4fc1ff;
      }
      .timestamp {
        color: #858585;
        font-size: 12px;
        margin-right: 10px;
      }
      .description {
        margin-top: 20px;
        padding: 15px;
        background: rgba(78, 201, 176, 0.1);
        border-left: 3px solid #4ec9b0;
        border-radius: 3px;
      }
      .highlight {
        color: #4ec9b0;
        font-weight: bold;
      }
      .code-block {
        background: #1e1e1e;
        border: 1px solid #3e3e42;
        padding: 15px;
        margin: 10px 0;
        border-radius: 3px;
        overflow-x: auto;
        font-size: 13px;
      }
      .expected {
        background: rgba(78, 201, 176, 0.1);
        padding: 15px;
        border-radius: 5px;
        margin: 20px 0;
      }
      .expected ol {
        margin: 10px 0;
        padding-left: 20px;
      }
    </style>
    <script>
      // ë¡œê·¸ ê¸°ë¡ ìœ í‹¸ë¦¬í‹°
      const startTime = performance.now()
      window.executionLogs = []

      function addLog(message, type) {
        const timestamp = (performance.now() - startTime).toFixed(2)
        const log = { message, type, timestamp }
        window.executionLogs.push(log)
        console.log(`[${timestamp}ms] ${message}`)
      }

      function displayLogs() {
        const container = document.getElementById('log-output')
        if (!container) return

        container.innerHTML = window.executionLogs
          .map(
            (log, index) => `
          <div class="log-entry log-${log.type}">
            <span class="timestamp">${log.timestamp}ms</span>
            <span class="highlight">${index + 1}.</span> ${log.message}
          </div>
        `
          )
          .join('')
      }

      // 1. Inline script (ì¦‰ì‹œ ì‹¤í–‰)
      addLog('Inline script ì‹¤í–‰ - ì¦‰ì‹œ ì‹¤í–‰', 'inline')
    </script>

    <script src="scripts/mixed-regular.js"></script>
    <!-- 2. Regular script - ë‹¤ìš´ë¡œë“œ + ì‹¤í–‰ (íŒŒì‹± ë¸”ë¡œí‚¹) -->

    <script defer src="scripts/mixed-defer-a.js"></script>
    <!-- defer íì— ì¶”ê°€ (ìˆœì„œ: 1) -->

    <script type="module" src="scripts/mixed-module-b.js"></script>
    <!-- defer íì— ì¶”ê°€ (ìˆœì„œ: 2) -->

    <script defer src="scripts/mixed-defer-c.js"></script>
    <!-- defer íì— ì¶”ê°€ (ìˆœì„œ: 3) -->

    <script type="module" async src="scripts/mixed-module-async.js"></script>
    <!-- async - ë‹¤ìš´ë¡œë“œ ì™„ë£Œ ì¦‰ì‹œ ì‹¤í–‰ (defer íì™€ ë¬´ê´€) -->

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        addLog('DOMContentLoaded ì´ë²¤íŠ¸ ë°œìƒ - defer í ëª¨ë‘ ì‹¤í–‰ ì™„ë£Œ', 'event')
        displayLogs()
      })
    </script>
  </head>
  <body>
    <h1>ğŸ” deferì™€ module í˜¼ìš© ì‹¤í–‰ ìˆœì„œ í…ŒìŠ¤íŠ¸</h1>

    <div class="description">
      <strong>í…ŒìŠ¤íŠ¸ ëª©ì :</strong> <code>&lt;script defer&gt;</code>ì™€
      <code>&lt;script type="module"&gt;</code>ì´ ê°™ì€ "defer í"ì—ì„œ HTML ì„ ì–¸
      ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•©ë‹ˆë‹¤.
      <br /><br />
      <strong>í•µì‹¬ ê°œë…:</strong> ëª¨ë“ˆ ìŠ¤í¬ë¦½íŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ deferì²˜ëŸ¼ ë™ì‘í•˜ë©°,
      deferì™€ moduleì€ ê°™ì€ ì‹¤í–‰ íë¥¼ ê³µìœ í•©ë‹ˆë‹¤.
    </div>

    <h2>ğŸ“Š ì‹¤í–‰ ë¡œê·¸</h2>
    <div class="log-container">
      <div id="log-output">
        <p style="color: #858585">ë¡œê·¸ ë¡œë”© ì¤‘...</p>
      </div>
    </div>

    <div class="expected">
      <h3>ì˜ˆìƒ ì‹¤í–‰ ìˆœì„œ:</h3>
      <ol>
        <li>
          <strong style="color: #ce9178">Inline script</strong> - ì¦‰ì‹œ ì‹¤í–‰
        </li>
        <li>
          <strong style="color: #dcdcaa">Regular script</strong> - ë‹¤ìš´ë¡œë“œ + ì‹¤í–‰
          (íŒŒì‹± ë¸”ë¡œí‚¹)
        </li>
        <li><em style="color: #858585">(HTML íŒŒì‹± ì™„ë£Œ)</em></li>
        <li>
          <strong style="color: #c586c0">Async module</strong> - ë‹¤ìš´ë¡œë“œ ì™„ë£Œ ì‹œì ì—
          ë”°ë¼ 3-8ë²ˆ ì‚¬ì´ ì–´ë””ë“  ì‹¤í–‰ ê°€ëŠ¥
        </li>
        <li>
          <strong style="color: #4ec9b0">defer-a.js</strong> - defer í ìˆœì„œ 1
        </li>
        <li>
          <strong style="color: #569cd6">module-b.js</strong> - defer í ìˆœì„œ 2 (ëª¨ë“ˆ
          ìŠ¤í¬ë¦½íŠ¸)
        </li>
        <li>
          <strong style="color: #4ec9b0">defer-c.js</strong> - defer í ìˆœì„œ 3
        </li>
        <li>
          <strong style="color: #4fc1ff">DOMContentLoaded</strong> - defer í ëª¨ë‘
          ì‹¤í–‰ ì™„ë£Œ í›„
        </li>
      </ol>
    </div>

    <div class="code-block">
      <strong>HTML êµ¬ì¡°:</strong>
      <pre style="margin: 10px 0; color: #d4d4d4;">
&lt;head&gt;
  &lt;script&gt;
    // 1. Inline ì¦‰ì‹œ ì‹¤í–‰
  &lt;/script&gt;

  &lt;script src="/regular.js"&gt;&lt;/script&gt;
  &lt;!-- 2. ì¼ë°˜ ìŠ¤í¬ë¦½íŠ¸ - ë‹¤ìš´ë¡œë“œ + ì‹¤í–‰ (ë¸”ë¡œí‚¹) --&gt;

  &lt;script defer src="/defer-a.js"&gt;&lt;/script&gt;
  &lt;!-- defer íì— ì¶”ê°€ (ìˆœì„œ: 1) --&gt;

  &lt;script type="module" src="/module-b.js"&gt;&lt;/script&gt;
  &lt;!-- defer íì— ì¶”ê°€ (ìˆœì„œ: 2) --&gt;

  &lt;script defer src="/defer-c.js"&gt;&lt;/script&gt;
  &lt;!-- defer íì— ì¶”ê°€ (ìˆœì„œ: 3) --&gt;

  &lt;script type="module" async src="/module-async.js"&gt;&lt;/script&gt;
  &lt;!-- async - ë‹¤ìš´ë¡œë“œ ì™„ë£Œ ì¦‰ì‹œ ì‹¤í–‰ --&gt;
&lt;/head&gt;</pre
      >
    </div>

    <div class="description">
      <strong>í•µì‹¬ í¬ì¸íŠ¸:</strong>
      <ul>
        <li>
          <span class="highlight">deferì™€ moduleì€ ê°™ì€ í</span>ì—ì„œ ì‹¤í–‰ â†’
          defer-a, module-b, defer-c ìˆœì„œ ë³´ì¥
        </li>
        <li>
          <span class="highlight">async moduleì€ ë…ë¦½ì </span> â†’ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ ì¦‰ì‹œ
          ì‹¤í–‰ (defer íì™€ ë¬´ê´€)
        </li>
        <li>DOMContentLoadedëŠ” defer íê°€ ëª¨ë‘ ì‹¤í–‰ëœ í›„ ë°œìƒ</li>
        <li>async moduleì€ DOMContentLoadedë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•ŠìŒ</li>
      </ul>
    </div>

    <div class="description" style="background: rgba(197, 134, 192, 0.1)">
      <strong>âš ï¸ async module ìœ„ì¹˜ ì£¼ì˜:</strong>
      <p>
        async moduleì˜ ì‹¤í–‰ ì‹œì ì€ <strong>ë‹¤ìš´ë¡œë“œ ì†ë„</strong>ì— ë”°ë¼
        ë‹¬ë¼ì§‘ë‹ˆë‹¤:
      </p>
      <ul>
        <li>
          <strong>ë‹¤ìš´ë¡œë“œê°€ ë¹ ë¥´ë©´</strong>: HTML íŒŒì‹± ì¤‘ ì‹¤í–‰ (2-3ë²ˆ ì‚¬ì´)
        </li>
        <li>
          <strong>ë‹¤ìš´ë¡œë“œê°€ ëŠë¦¬ë©´</strong>: defer í ì‹¤í–‰ í›„ (7-8ë²ˆ ì‚¬ì´)
        </li>
        <li>
          ì´ í…ŒìŠ¤íŠ¸ì—ì„œëŠ” ìºì‹œëœ ë¡œì»¬ íŒŒì¼ì´ë¯€ë¡œ ë§¤ìš° ë¹¨ë¼ì„œ
          <strong>3-4ë²ˆ ì‚¬ì´</strong>ì— ì‹¤í–‰ë  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.
        </li>
      </ul>
    </div>

    <p style="color: #858585; margin-top: 40px; text-align: center">
      í¬ë¡¬ ê°œë°œì ë„êµ¬ Console íƒ­ì„ ì—´ë©´ ë” ìì„¸í•œ ë¡œê·¸ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br />
      ì—¬ëŸ¬ ë²ˆ ìƒˆë¡œê³ ì¹¨í•˜ë©´ async moduleì˜ ì‹¤í–‰ ì‹œì ì´ ë³€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    </p>
  </body>
</html>
