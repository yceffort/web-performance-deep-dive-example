<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FOIT (Flash of Invisible Text) ì˜ˆì œ</title>
    <style>
      /* font-displayë¥¼ ì„¤ì •í•˜ì§€ ì•Šìœ¼ë©´ ë¸Œë¼ìš°ì € ê¸°ë³¸ ë™ì‘ (blockê³¼ ìœ ì‚¬) */
      @font-face {
        font-family: 'CustomFont';
        src: url('/fonts/slow-font.woff2') format('woff2');
        /* font-display ì†ì„± ì—†ìŒ - FOIT ë°œìƒ */
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'CustomFont', Arial, sans-serif;
        font-size: 20px;
        padding: 40px;
        line-height: 1.6;
        max-width: 900px;
        margin: 0 auto;
      }

      .info-box {
        background: #fff3cd;
        border: 2px solid #ffc107;
        padding: 20px;
        margin-bottom: 30px;
        border-radius: 8px;
      }

      .info-box h2 {
        margin-bottom: 10px;
        color: #856404;
      }

      .info-box p {
        color: #856404;
        margin-bottom: 10px;
      }

      .content {
        background: white;
        padding: 30px;
        border: 1px solid #ddd;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      h1 {
        font-size: 48px;
        margin-bottom: 20px;
        color: #2c3e50;
      }

      .description {
        background: #e8f4f8;
        padding: 15px;
        margin: 20px 0;
        border-left: 4px solid #3498db;
      }

      .status {
        position: fixed;
        top: 20px;
        right: 20px;
        background: #fff;
        padding: 15px 20px;
        border: 2px solid #333;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        min-width: 250px;
      }

      .status h3 {
        margin-bottom: 10px;
        font-size: 16px;
      }

      .status .metric {
        display: flex;
        justify-content: space-between;
        margin: 5px 0;
        font-size: 14px;
      }

      .status .metric strong {
        color: #e74c3c;
      }

      .timeline {
        margin-top: 30px;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 8px;
      }

      .timeline-item {
        padding: 10px 0;
        border-bottom: 1px solid #ddd;
      }

      .timeline-item:last-child {
        border-bottom: none;
      }

      .timeline-item .time {
        font-weight: bold;
        color: #3498db;
      }
    </style>
  </head>
  <body>
    <div class="info-box">
      <h2>âš ï¸ FOIT (Flash of Invisible Text) í˜„ìƒ</h2>
      <p>
        <strong>ì´ í˜ì´ì§€ëŠ” font-display ì†ì„±ì„ ì„¤ì •í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</strong>
      </p>
      <p>
        í°íŠ¸ê°€ ë¡œë“œë˜ëŠ” ë™ì•ˆ (ì•½ 3-4ì´ˆ) ì•„ë˜ í…ìŠ¤íŠ¸ê°€ ë³´ì´ì§€ ì•ŠëŠ” ê²ƒì„
        í™•ì¸í•˜ì„¸ìš”.
      </p>
      <p>
        Chrome/Firefox: ìµœëŒ€ 3ì´ˆ ëŒ€ê¸° í›„ í´ë°± í°íŠ¸ í‘œì‹œ | Safari: í°íŠ¸ ë¡œë“œë 
        ë•Œê¹Œì§€ ë¬´í•œ ëŒ€ê¸°
      </p>
    </div>

    <div class="status" id="status">
      <h3>ğŸ“Š í°íŠ¸ ë¡œë”© ìƒíƒœ</h3>
      <div class="metric">
        <span>ìƒíƒœ:</span>
        <strong id="font-status">ë¡œë”© ì¤‘...</strong>
      </div>
      <div class="metric">
        <span>ê²½ê³¼ ì‹œê°„:</span>
        <strong id="elapsed-time">0ms</strong>
      </div>
      <div class="metric">
        <span>FCP:</span>
        <strong id="fcp-time">-</strong>
      </div>
    </div>

    <div class="content">
      <h1>ì´ ì œëª©ì€ í°íŠ¸ê°€ ë¡œë“œë  ë•Œê¹Œì§€ ë³´ì´ì§€ ì•ŠìŠµë‹ˆë‹¤</h1>

      <div class="description">
        <p>
          <strong>FOITë€?</strong> Flash of Invisible Textì˜ ì•½ìë¡œ, ì›¹ í°íŠ¸ê°€
          ë¡œë“œë˜ëŠ” ë™ì•ˆ í…ìŠ¤íŠ¸ë¥¼ ì™„ì „íˆ ìˆ¨ê¸°ëŠ” í˜„ìƒì…ë‹ˆë‹¤.
        </p>
      </div>

      <p>
        Chromeê³¼ FirefoxëŠ” í°íŠ¸ ë‹¤ìš´ë¡œë“œê°€ ì‹œì‘ë˜ë©´ ìµœëŒ€ 3ì´ˆ ë™ì•ˆ í…ìŠ¤íŠ¸ë¥¼
        ìˆ¨ê¹ë‹ˆë‹¤. 3ì´ˆ ì•ˆì— í°íŠ¸ê°€ ë„ì°©í•˜ì§€ ì•Šìœ¼ë©´ í´ë°± í°íŠ¸(Arial)ë¡œ í…ìŠ¤íŠ¸ë¥¼
        í‘œì‹œí•˜ê³ , í°íŠ¸ê°€ ë‚˜ì¤‘ì— ë„ì°©í•˜ë©´ ì›¹ í°íŠ¸ë¡œ êµì²´í•©ë‹ˆë‹¤.
      </p>

      <p>
        SafariëŠ” ë” ì‹¬ê°í•©ë‹ˆë‹¤. Timeoutì´ ì•„ì˜ˆ ì—†ì–´ì„œ í°íŠ¸ê°€ ë„ì°©í•  ë•Œê¹Œì§€ ë¬´í•œì •
        ê¸°ë‹¤ë¦½ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ê°€ ëŠë¦¬ê±°ë‚˜ CDNì´ ì‘ë‹µí•˜ì§€ ì•Šìœ¼ë©´ ì‚¬ìš©ìëŠ” ë¹ˆ í™”ë©´ë§Œ
        ë³´ê²Œ ë©ë‹ˆë‹¤.
      </p>

      <h2>ì„±ëŠ¥ ì˜í–¥</h2>

      <p>
        FOITëŠ” FCP (First Contentful Paint)ì™€ LCP (Largest Contentful Paint)ë¥¼
        ì§ì ‘ì ìœ¼ë¡œ ì§€ì—°ì‹œí‚µë‹ˆë‹¤. í…ìŠ¤íŠ¸ê°€ í˜ì´ì§€ì˜ ì£¼ìš” ì½˜í…ì¸ ë¼ë©´, í…ìŠ¤íŠ¸ê°€
        ë³´ì´ì§€ ì•ŠëŠ” ë™ì•ˆ FCPê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
      </p>

      <div class="timeline" id="timeline">
        <h3>ğŸ“ íƒ€ì„ë¼ì¸</h3>
        <div id="timeline-events"></div>
      </div>
    </div>

    <script>
      const startTime = performance.now()
      const timelineEvents = []

      function addTimelineEvent(message) {
        const elapsed = Math.round(performance.now() - startTime)
        timelineEvents.push({ time: elapsed, message })
        updateTimeline()
      }

      function updateTimeline() {
        const container = document.getElementById('timeline-events')
        container.innerHTML = timelineEvents
          .map(
            (event) =>
              `<div class="timeline-item">
                <span class="time">${event.time}ms:</span> ${event.message}
              </div>`,
          )
          .join('')
      }

      function updateElapsedTime() {
        const elapsed = Math.round(performance.now() - startTime)
        document.getElementById('elapsed-time').textContent = `${elapsed}ms`
      }

      addTimelineEvent('í˜ì´ì§€ ë¡œë“œ ì‹œì‘')
      setInterval(updateElapsedTime, 100)

      // FCP ì¸¡ì •
      const observer = new PerformanceObserver((list) => {
        for (const entry of list.getEntries()) {
          if (entry.name === 'first-contentful-paint') {
            const fcpTime = Math.round(entry.startTime)
            document.getElementById('fcp-time').textContent = `${fcpTime}ms`
            addTimelineEvent(`FCP ë°œìƒ: ${fcpTime}ms`)
          }
        }
      })
      observer.observe({ type: 'paint', buffered: true })

      // í°íŠ¸ ë¡œë”© ìƒíƒœ í™•ì¸
      const fontCheckStart = performance.now()

      function checkFontLoaded() {
        const elapsed = Math.round(performance.now() - fontCheckStart)

        if (document.fonts.check('20px CustomFont')) {
          document.getElementById('font-status').textContent = 'ë¡œë“œ ì™„ë£Œ'
          document.getElementById('font-status').style.color = '#27ae60'
          addTimelineEvent(`í°íŠ¸ ë¡œë“œ ì™„ë£Œ: ${elapsed}ms`)
          return true
        }

        if (elapsed > 3000 && elapsed < 3100) {
          addTimelineEvent(
            'âš ï¸ 3ì´ˆ ì´ˆê³¼: Chrome/FirefoxëŠ” í´ë°± í°íŠ¸ë¡œ ì „í™˜í•©ë‹ˆë‹¤',
          )
        }

        setTimeout(checkFontLoaded, 100)
        return false
      }

      document.fonts.ready.then(() => {
        const loadTime = Math.round(performance.now() - startTime)
        addTimelineEvent(`document.fonts.ready: ${loadTime}ms`)
        checkFontLoaded()
      })

      checkFontLoaded()

      // DOMContentLoaded
      document.addEventListener('DOMContentLoaded', () => {
        const elapsed = Math.round(performance.now() - startTime)
        addTimelineEvent(`DOMContentLoaded: ${elapsed}ms`)
      })

      // í˜ì´ì§€ ì™„ì „ ë¡œë“œ
      window.addEventListener('load', () => {
        const elapsed = Math.round(performance.now() - startTime)
        addTimelineEvent(`í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ: ${elapsed}ms`)
      })
    </script>
  </body>
</html>
