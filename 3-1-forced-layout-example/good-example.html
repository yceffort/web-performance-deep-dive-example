<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì¢‹ì€ ì˜ˆ: ì½ê¸°/ì“°ê¸° ë¶„ë¦¬</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background: #f5f5f5;
      }

      .header {
        background: #51cf66;
        color: white;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
      }

      .info {
        background: #d3f9d8;
        border: 2px solid #51cf66;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
      }

      .controls {
        background: white;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      button {
        background: #51cf66;
        color: white;
        border: none;
        padding: 12px 24px;
        font-size: 16px;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 600;
      }

      button:hover {
        background: #40c057;
      }

      .container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
        gap: 10px;
      }

      .box {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 20px;
        border-radius: 8px;
        text-align: center;
        font-weight: bold;
        transition: transform 0.2s;
      }

      .box:hover {
        transform: scale(1.05);
      }

      .result {
        background: white;
        padding: 20px;
        border-radius: 8px;
        margin-top: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .result h3 {
        margin-top: 0;
        color: #51cf66;
      }

      .metric {
        font-size: 24px;
        font-weight: bold;
        color: #51cf66;
        margin: 10px 0;
      }

      code {
        background: #f8f9fa;
        padding: 2px 6px;
        border-radius: 3px;
        font-family: 'Monaco', 'Courier New', monospace;
      }

      .comparison {
        background: #fff3cd;
        padding: 15px;
        border-radius: 8px;
        margin-top: 15px;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>âœ… ì¢‹ì€ ì˜ˆ: ì½ê¸°/ì“°ê¸° ë¶„ë¦¬</h1>
      <p>ëª¨ë“  ì½ê¸° ì‘ì—…ì„ ë¨¼ì € ìˆ˜í–‰í•˜ê³ , ê·¸ ë‹¤ìŒ ì“°ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤</p>
    </div>

    <div class="info">
      <strong>ğŸ“Š DevTools í™•ì¸ ë°©ë²•:</strong>
      <ol>
        <li>Chrome DevTools ì—´ê¸° (F12 ë˜ëŠ” Cmd+Option+I)</li>
        <li>Performance íƒ­ìœ¼ë¡œ ì´ë™</li>
        <li>"Start profiling and reload page" (âŸ³) ë²„íŠ¼ í´ë¦­</li>
        <li>
          Main ìŠ¤ë ˆë“œì—ì„œ "Recalculate Style"ê³¼ "Layout"ì´
          <strong>í•œ ë²ˆë§Œ</strong>
          ë°œìƒí•˜ëŠ” ê²ƒ í™•ì¸
        </li>
        <li>ë‚˜ìœ ì˜ˆì™€ ë¹„êµí•˜ì—¬ ì„±ëŠ¥ ì°¨ì´ í™•ì¸</li>
      </ol>
    </div>

    <div class="controls">
      <button onclick="runGoodExample()">
        ğŸŸ¢ ì½ê¸°/ì“°ê¸° ë¶„ë¦¬ ì‹¤í–‰ (ì¢‹ì€ ì˜ˆ)
      </button>
      <p style="margin-top: 10px; color: #666">
        ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ 1000ê°œ ìš”ì†Œì˜ ë†’ì´ë¥¼ ì½ê³  ìˆ˜ì •í•©ë‹ˆë‹¤
      </p>
    </div>

    <div class="container" id="container"></div>

    <div class="result" id="result" style="display: none">
      <h3>ì‹¤í–‰ ê²°ê³¼</h3>
      <div>ì‹¤í–‰ ì‹œê°„: <span class="metric" id="duration">-</span></div>
      <div style="margin-top: 15px">
        <strong>ê°œì„ ì :</strong>
        <ul>
          <li>
            1ë‹¨ê³„: ëª¨ë“  ìš”ì†Œì˜ <code>offsetHeight</code>ë¥¼ ë°°ì—´ì— ì €ì¥ (ì½ê¸°ë§Œ)
          </li>
          <li>
            2ë‹¨ê³„: ì €ì¥ëœ ê°’ìœ¼ë¡œ ëª¨ë“  <code>style.height</code> ìˆ˜ì • (ì“°ê¸°ë§Œ)
          </li>
          <li>
            ì½ê¸°/ì“°ê¸° ë¶„ë¦¬ë¡œ <strong>ë ˆì´ì•„ì›ƒ ì¬ê³„ì‚°ì´ 1ë²ˆë§Œ</strong> ë°œìƒ
          </li>
          <li>ë‚˜ìœ ì˜ˆ ëŒ€ë¹„ <strong>5-10ë°° ë¹ ë¥¸ ì„±ëŠ¥</strong></li>
        </ul>
      </div>
      <div class="comparison" id="comparison"></div>
    </div>

    <script>
      // 1000ê°œì˜ ë°•ìŠ¤ ìƒì„±
      const container = document.getElementById('container')
      const COUNT = 1000

      for (let i = 0; i < COUNT; i++) {
        const box = document.createElement('div')
        box.className = 'box'
        box.textContent = i + 1
        container.appendChild(box)
      }

      // ì¢‹ì€ ì˜ˆ: ì½ê¸°/ì“°ê¸° ë¶„ë¦¬
      function runGoodExample() {
        console.log('ğŸŸ¢ ì¢‹ì€ ì˜ˆ ì‹¤í–‰ ì‹œì‘')

        const elements = document.querySelectorAll('.box')
        const startTime = performance.now()

        // âœ… ì¢‹ì€ íŒ¨í„´: ì½ê¸°ì™€ ì“°ê¸°ë¥¼ ë¶„ë¦¬

        // 1ë‹¨ê³„: ëª¨ë“  ì½ê¸° ì‘ì—…ì„ ë¨¼ì € ìˆ˜í–‰
        console.log('  ğŸ“– 1ë‹¨ê³„: ëª¨ë“  ìš”ì†Œì˜ ë†’ì´ ì½ê¸°...')
        const heights = Array.from(elements).map((el) => el.offsetHeight)
        // ë ˆì´ì•„ì›ƒ ê³„ì‚°ì´ ì—¬ê¸°ì„œ í•œ ë²ˆë§Œ ë°œìƒ!

        // 2ë‹¨ê³„: ëª¨ë“  ì“°ê¸° ì‘ì—…ì„ ë‚˜ì¤‘ì— ìˆ˜í–‰
        console.log('  âœï¸  2ë‹¨ê³„: ëª¨ë“  ìš”ì†Œì˜ ë†’ì´ ìˆ˜ì •...')
        elements.forEach((el, i) => {
          el.style.height = heights[i] + 10 + 'px'
        })
        // ì¶”ê°€ ë ˆì´ì•„ì›ƒ ì¬ê³„ì‚° ì—†ìŒ!

        const endTime = performance.now()
        const duration = (endTime - startTime).toFixed(2)

        console.log(`ğŸŸ¢ ì¢‹ì€ ì˜ˆ ì‹¤í–‰ ì™„ë£Œ: ${duration}ms`)
        console.log(
          'âœ… DevTools Performance íŒ¨ë„ì—ì„œ "Layout"ì´ í•œ ë²ˆë§Œ ë°œìƒí•˜ëŠ” ê²ƒì„ í™•ì¸í•˜ì„¸ìš”!',
        )

        // ê²°ê³¼ í‘œì‹œ
        document.getElementById('result').style.display = 'block'
        document.getElementById('duration').textContent = duration + 'ms'

        // ë¹„êµ ì •ë³´ í‘œì‹œ
        const badExampleTime = localStorage.getItem('badExampleTime')
        if (badExampleTime) {
          const improvement =
            ((badExampleTime - duration) / badExampleTime) * 100
          document.getElementById('comparison').innerHTML = `
            <strong>ğŸ“Š ì„±ëŠ¥ ë¹„êµ:</strong>
            <ul>
              <li>ë‚˜ìœ ì˜ˆ: ${badExampleTime}ms</li>
              <li>ì¢‹ì€ ì˜ˆ: ${duration}ms</li>
              <li><strong style="color: #51cf66">ì•½ ${improvement.toFixed(1)}% ê°œì„ !</strong></li>
            </ul>
          `
        }

        // ì‹œê°„ ì €ì¥
        localStorage.setItem('goodExampleTime', duration)
      }

      // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì‹¤í–‰ (DevToolsì—ì„œ í™•ì¸í•˜ê¸° ìœ„í•´)
      window.addEventListener('load', () => {
        console.log('='.repeat(50))
        console.log('ğŸ“Š ì½ê¸°/ì“°ê¸° ë¶„ë¦¬ ë°ëª¨')
        console.log('='.repeat(50))
        console.log('')
        console.log(
          'ğŸ‘‰ DevTools Performance íŒ¨ë„ì„ ì—´ê³  í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì„¸ìš”',
        )
        console.log(
          'ğŸ‘‰ Main ìŠ¤ë ˆë“œì—ì„œ "Layout"ì´ í•œ ë²ˆë§Œ ë°œìƒí•˜ëŠ” ê²ƒì„ í™•ì¸í•˜ì„¸ìš”',
        )
        console.log('')

        // ìë™ ì‹¤í–‰
        setTimeout(() => {
          runGoodExample()
        }, 500)
      })
    </script>
  </body>
</html>
